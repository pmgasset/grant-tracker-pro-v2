name = "grant-tracker-pro"
main = "functions/_worker.js"
compatibility_date = "2023-12-01"
compatibility_flags = ["nodejs_compat"]

# Pages configuration for frontend
[env.production]
name = "grant-tracker-pro"
route = { pattern = "grant-tracker-pro.pages.dev/*", zone_name = "pages.dev" }

# KV Namespaces for data storage
[[kv_namespaces]]
binding = "GRANTS_KV"
id = "your-kv-namespace-id" # You'll get this when creating KV namespace
preview_id = "your-preview-kv-namespace-id"

# D1 Database (optional - for advanced queries)
[[d1_databases]]
binding = "GRANTS_D1"
database_name = "grant-tracker-db"
database_id = "your-d1-database-id" # You'll get this when creating D1 database

# Environment variables
[vars]
ENVIRONMENT = "production"
APP_NAME = "Grant Tracker Pro"

# Functions routing
[[routes]]
pattern = "/api/search-grants"
script = "search-grants"

[[routes]]
pattern = "/api/save-grants"
script = "save-grants"

[[routes]]
pattern = "/api/load-grants"
script = "save-grants"

# Worker configuration
[build]
command = "npm run build"
cwd = "."
watch_dir = "functions"

[build.upload]
format = "modules"
dir = "functions"
main = "./_worker.js"

# Development configuration
[env.development]
name = "grant-tracker-pro-dev"
kv_namespaces = [
  { binding = "GRANTS_KV", id = "your-dev-kv-namespace-id" }
]

# Triggers for automatic deployment
[triggers]
crons = []

# Limits and settings
[limits]
cpu_ms = 50

# Analytics (optional)
[analytics_engine_datasets]
# Uncomment to enable analytics
# [[analytics_engine_datasets]]
# binding = "ANALYTICS"

# Secrets (set these using wrangler secret put)
# SEARCH_API_KEY = "your-search-api-key" # For external search APIs
# DATABASE_URL = "your-database-connection-string" # If using external DB